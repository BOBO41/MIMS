<!DOCTYPE html>

<html>
<head>
    @*<meta name="viewport" content="width=device-width" />*@
    <meta charset="UTF-8">
    <title>DrugInfo</title>
    @*Easyui需要引入的文件*@
    <script type="text/javascript" src="~/Content/jquery-easyui-1.4.5/jquery.min.js"></script>
    <script type="text/javascript" src="~/Content/jquery-easyui-1.4.5/jquery.easyui.min.js"></script>
    <link href="~/Content/jquery-easyui-1.4.5/themes/default/easyui.css" rel="stylesheet" />
    <link href="~/Content/jquery-easyui-1.4.5/themes/icon.css" rel="stylesheet" />
    <script type="text/javascript">
        $(function () {
            //初始化datagrid
            InitGrid();
            //分页

        });

        //实现对DataGird控件的绑定操作
        function InitGrid(queryData) {
            $('#grid').datagrid({
                url: '../DrugManagement/LoadList',
                height: 406,
                nowrap: true,//单行显示
                autoRowHeight: false,
                striped: false,     //斑马纹
                collapsible: true,      //可折叠
                pagination: true,
                pageSize: 20,
                fitColumns: true,       //自适应列宽
                rownumbers: true,
                sortName: 'YPXH',    //根据某个字段给easyUI排序
                sortOrder: 'asc',
                remoteSort: true,
                loadMsg:'加载中，请等待',
                queryParams: ({
                    query: $('#itemid').val()
                }),  //异步查询的参数
                columns: [[
                     { title: '药品名称', field: 'YPMC', width: 200, sortable: true },
                     { title: '药品规格', field: 'YPGG', width: 80, sortable: true },
                     { title: '药品单位', field: 'YPDW', width: 80, sortable: true },
                     { title: '剂型', field: 'YPSX', width: 80, sortable: true },
                     { title: '拼音码', field: 'PYDM', width: 100 },
                     { title: '药品编码', field: 'YPDM', width: 100},
                     { title: '特殊药品', field: 'TSYP', width: 100},
                     { title: '五笔码', field: 'WBDM', width: 100 },
                     { title: '角型码', field: 'JXDM', width: 100 }
                ]],
                toolbar: '#tb',
                onDblClickRow: function (rowIndex, rowData) {
                    alert(rowIndex);
                }
            })
            var p = $('#grid').datagrid('getPager');
            $(p).pagination({
                pageSize: 20,
                pageList: [10,20, 40, 60,100,200],
                beforePageText: '第',
                afterPageText: '页   共 {pages} 页',
                displayMsg: '当前显示 {from} - {to} 条记录   共 {total} 条记录',
            });
            $('#btnReload').click(function () {
                $("#grid").datagrid("reload");
            });
        };
    </script>
</head>
<body style="margin:0">
    <div>
        <div class="easyui-panel" style="padding:5px;">
            <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-print'">打印</a>
            <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-cancel'">关闭</a>
            <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-help'"></a>
            <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-back'"></a>
        </div>
        <div class="easyui-tabs">
            <div title="基本属性">
                <table id="grid"></table>
                <div id="tb" style="padding:3px">
                    <a id="btnView" href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-more'">查看</a>
                    <a id="btnReload" href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-reload'">刷新</a>
                    <span>拼音码</span>
                    <input id="itemid" style="border:1px solid #ccc">
                    <a href="#" class="easyui-linkbutton" plain="true" onclick="InitGrid()">查找</a>
                </div>
            </div>
            <div title="价格管理" style="padding:10px">
            </div>
        </div>
    </div>
</body>
</html>
